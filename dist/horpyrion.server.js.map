{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 2945fa989239725be30c","webpack:///external \"babel-polyfill\"","webpack:///./src/index.js","webpack:///./src/Horpyrion.js","webpack:///./src/UserContext.js","webpack:///./src/ResourceContext.js","webpack:///./src/ModelManager.js","webpack:///external \"fs\"","webpack:///external \"path\"","webpack:///external \"sequelize\""],"names":["default","Horpyrion","configuration","_configuration","_modelManager","ModelManager","authenticate","UserContext","Authorize","ROOT_USER_TOKEN","userToken","user","modelManager","_user","resourceName","ResourceContext","CreateResource","Symbol","resource","_resource","attributeName","attributeType","recordId","config","_sequelize","Sequelize","dbname","pass","dialect","type","port","_models","fs","readdirSync","path","join","__dirname","filter","file","indexOf","forEach","model","import","name","Object","values","associate","then","console","log","catch","error","err"],"mappings":"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","file":"horpyrion.server.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2945fa989239725be30c","module.exports = require(\"babel-polyfill\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-polyfill\"\n// module id = 1\n// module chunks = 0","export default from \"./Horpyrion\";\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import UserContext from \"./UserContext\";\nimport ModelManager from \"./ModelManager\";\n\nexport default class Horpyrion {\n    constructor(configuration) {\n        this._configuration = configuration;\n    }\n    async sync() {\n        this._modelManager = new ModelManager(this._configuration);\n        return this._modelManager.authenticate();\n    }\n\n    async authorize() {\n        return UserContext.Authorize();\n    }\n\n    getRootUser() {\n        return new UserContext(UserContext.ROOT_USER_TOKEN, this._modelManager);\n    }\n\n    getUser(userToken) {\n        return new UserContext(userToken, this._modelManager);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Horpyrion.js","import ResourceContext from \"./ResourceContext\";\n\nexport default class UserContext {\n    static ROOT_USER_TOKEN = Symbol(\"ROOT_USER_TOKEN\");\n    constructor(user, modelManager) {\n        this._user = user;\n        this._modelManager = modelManager;\n    }\n\n    static async Authorize() {\n        return false;\n    }\n\n    async createResource(resourceName) {\n        return ResourceContext.CreateResource(resourceName, this._user, this._modelManager);\n    }\n\n    getResource(resourceName) {\n        return new ResourceContext(resourceName, this._user, this._modelManager);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/UserContext.js","export default class ResourceContext {\n    constructor(resource, user, modelManager) {\n        this._resource = resource;\n        this._user = user;\n        this._modelManager = modelManager;\n    }\n\n    static async CreateResource(resourceName, user, modelManager) {\n        return false;\n    }\n\n    async addAttribute(attributeName, attributeType) {\n        return false;\n    }\n\n    async getRecord(recordId) {\n        return false;\n    }\n\n    async getRecords() {\n        return false;\n    }\n\n    async createRecord() {\n        return false;\n    }\n\n    async updateRecord() {\n        return false;\n    }\n\n    async getAttributes() {\n        return false;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ResourceContext.js","import fs from \"fs\";\nimport path from \"path\";\nimport Sequelize from \"sequelize\";\n\nexport default class ModelManager {\n    constructor(config) {\n        this._sequelize = new Sequelize(config.dbname, config.user, config.pass, {\n            dialect: config.type,\n            port: config.port\n        });\n        this._models = {};\n\n        fs.readdirSync(path.join(__dirname, \"models\"))\n            .filter(file => {\n                return file.indexOf(\".\") !== 0;\n            })\n            .forEach(file => {\n                const model = this._sequelize.import(path.join(__dirname, file));\n                this._models[model.name] = model;\n            });\n\n        Object.values(this._models).forEach(model => {\n            if (model.associate) {\n                model.associate(this._models);\n            }\n        });\n    }\n\n    authenticate() {\n        return this._sequelize\n            .authenticate()\n            .then(() => {\n                console.log(\"Connection has been established successfully.\");\n            })\n            .catch(err => {\n                console.error(\"Unable to connect to the database:\", err);\n            });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ModelManager.js","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"sequelize\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sequelize\"\n// module id = 9\n// module chunks = 0"],"sourceRoot":""}