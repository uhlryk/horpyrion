{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f7147d458f3b9abbf669","webpack:///./src/contexts/actions/createFactory.js","webpack:///./src/contexts/actions/updateFactory.js","webpack:///./src/contexts/actions/getFactory.js","webpack:///./src/contexts/actions/getListFactory.js","webpack:///./src/contexts/actions/removeFactory.js","webpack:///external \"babel-polyfill\"","webpack:///./src/index.js","webpack:///./src/Horpyrion.js","webpack:///./src/contexts/userContext/UserContext.js","webpack:///./src/contexts/Context.js","webpack:///./src/contexts/schemaContext/SchemaContext.js","webpack:///./src/contexts/schemaContext/contextActions/getSchemaContextFactory.js","webpack:///./src/contexts/recordContext/RecordContext.js","webpack:///./src/contexts/recordContext/contextActions/getRecordContextFactory.js","webpack:///./src/contexts/userContext/contextActions/getUserContextFactory.js","webpack:///./src/contexts/userSchemaContext/UserSchemaContext.js","webpack:///./src/contexts/ContextAction.js","webpack:///./src/throwIfNoSync.js","webpack:///./src/RootUser.js","webpack:///./src/ModelManager.js","webpack:///external \"fs\"","webpack:///external \"path\"","webpack:///external \"sequelize\"","webpack:///external \"function-overloader\""],"names":["createFactory","modelId","modelManager","data","getModels","create","then","entity","updateFactory","entityId","update","where","id","getFactory","findOne","raw","getListFactory","whereData","findAll","removeRecordFactory","destroy","default","Horpyrion","configuration","_configuration","options","_modelManager","ModelManager","authenticate","sync","contextAction","ContextAction","UserContext","RootUser","ROOT_USER_ID","userId","getDbInstance","addContextAction","schemaName","resolveContextAction","name","schema","toJSON","schemaId","createContext","SchemaContext","UserSchemaContext","user","Context","_contextAction","copyContextAction","key","executeFactory","addAction","resolve","getContextAction","getModelManager","createContextAction","recordId","RecordContext","attributeName","attributeType","getRecordAction","record","SchemaId","query","getRecordListAction","Object","assign","createRecordAction","updateRecordAction","removeRecordAction","Schema","Record","User","createUserRecordAction","updateUserRecordAction","getUserRecordAction","userRecord","getUserRecordListAction","userRecordList","contextActions","_contextActions","slice","push","execute","concat","reduce","prevContextAction","contextObject","context","throwIfNoSync","isSync","Promise","reject","Error","Symbol","_isSync","when","Overload","INSTANCE","Sequelize","do","_sequelize","sequelize","else","config","dbname","password","dialect","type","port","host","logging","arguments","_models","fs","readdirSync","path","join","__dirname","filter","file","indexOf","forEach","model","import","values","associate","catch","console","error","err"],"mappings":"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","file":"horpyrion.server.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f7147d458f3b9abbf669","export default function createFactory(modelId, modelManager) {\n    return (data = {}) =>\n        modelManager\n            .getModels()\n            [modelId].create(data, {})\n            .then(entity => {\n                return entity;\n            });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/contexts/actions/createFactory.js","export default function updateFactory(modelId, modelManager) {\n    return (entityId, data = {}) =>\n        modelManager\n            .getModels()\n            [modelId].update(data, {\n                where: {\n                    id: entityId\n                }\n            })\n\n            .then(entity => entity);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/contexts/actions/updateFactory.js","export default function getFactory(modelId, modelManager) {\n    return entityId =>\n        modelManager\n            .getModels()\n            [modelId].findOne({\n                where: {\n                    id: entityId\n                },\n                raw: true\n            })\n            .then(entity => {\n                return entity;\n            });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/contexts/actions/getFactory.js","export default function getListFactory(modelId, modelManager) {\n    return (whereData = {}) =>\n        modelManager\n            .getModels()\n            [modelId].findAll({\n                where: whereData,\n                raw: true\n            })\n            .then(entity => {\n                return entity;\n            });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/contexts/actions/getListFactory.js","export default function removeRecordFactory(modelId, modelManager) {\n    return entityId =>\n        modelManager\n            .getModels()\n            [modelId].destroy({\n                where: {\n                    id: entityId\n                }\n            })\n\n            .then(() => true);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/contexts/actions/removeFactory.js","module.exports = require(\"babel-polyfill\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-polyfill\"\n// module id = 6\n// module chunks = 0","export default from \"./Horpyrion\";\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import UserContext from \"./contexts/userContext/UserContext\";\nimport ContextAction from \"./contexts/ContextAction\";\nimport RootUser from \"./RootUser\";\nimport ModelManager from \"./ModelManager\";\n\nexport default class Horpyrion {\n    constructor(configuration) {\n        this._configuration = configuration;\n    }\n    async sync(options) {\n        this._modelManager = new ModelManager(this._configuration);\n        await this._modelManager.authenticate();\n        await this._modelManager.sync(options);\n    }\n\n    setRootUser() {\n        const contextAction = new ContextAction(this._modelManager);\n        return new UserContext(RootUser.ROOT_USER_ID, contextAction, this._modelManager);\n    }\n\n    setUser(userId) {\n        const contextAction = new ContextAction(this._modelManager);\n        return new UserContext(userId, contextAction, this._modelManager);\n    }\n\n    getDbInstance() {\n        return this._modelManager.getDbInstance();\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Horpyrion.js","import Context from \"../Context\";\nimport SchemaContext from \"../schemaContext/SchemaContext\";\nimport getUserContextFactory from \"./contextActions/getUserContextFactory\";\nimport UserSchemaContext from \"../userSchemaContext/UserSchemaContext\";\n\nexport default class UserContext extends Context {\n    constructor(userId, contextAction, modelManager) {\n        super(contextAction, modelManager);\n        this.addContextAction(\"user\", getUserContextFactory(userId));\n    }\n\n    createSchema(schemaName) {\n        return this.resolveContextAction()\n            .then(() => this.createFactory(\"Schema\")({ name: schemaName }))\n            .then(schema => schema.toJSON());\n    }\n\n    setSchema(schemaId) {\n        return this.createContext(schemaId, SchemaContext);\n    }\n\n    setUserSchema() {\n        return this.createContext(null, UserSchemaContext);\n    }\n\n    getData() {\n        return this.resolveContextAction().then(({ user }) => user);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/contexts/userContext/UserContext.js","import createFactory from \"./actions/createFactory\";\n\nexport default class ContextAction {\n    constructor(contextAction, modelManager) {\n        this._contextAction = contextAction.copyContextAction();\n        this._modelManager = modelManager;\n    }\n\n    addContextAction(key, executeFactory) {\n        this._contextAction.addAction(key, executeFactory);\n    }\n\n    getContextAction() {\n        return this._contextAction;\n    }\n\n    resolveContextAction() {\n        return this._contextAction.resolve();\n    }\n\n    getModelManager() {\n        return this._modelManager;\n    }\n\n    createContext(id, Context) {\n        return new Context(id, this.getContextAction(), this.getModelManager());\n    }\n\n    createFactory(modelId) {\n        return createFactory(modelId, this.getModelManager());\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/contexts/Context.js","import createFactory from \"../actions/createFactory\";\nimport getFactory from \"../actions/getFactory\";\nimport getListFactory from \"../actions/getListFactory\";\nimport updateFactory from \"../actions/updateFactory\";\nimport removeFactory from \"../actions/removeFactory\";\nimport getSchemaContextFactory from \"./contextActions/getSchemaContextFactory\";\nimport RecordContext from \"../recordContext/RecordContext\";\n\nexport default class SchemaContext {\n    constructor(schemaId, contextAction, modelManager) {\n        this._contextAction = contextAction.createContextAction(\"schema\", getSchemaContextFactory(schemaId));\n        this._modelManager = modelManager;\n    }\n\n    setRecord(recordId) {\n        return new RecordContext(recordId, this._contextAction, this._modelManager);\n    }\n\n    async addAttribute(attributeName, attributeType) {\n        return false;\n    }\n\n    getData() {\n        return this._contextAction.resolve().then(({ schema }) => schema);\n    }\n\n    getRecord(recordId) {\n        const getRecordAction = getFactory(\"Record\", this._modelManager);\n\n        return this._contextAction.resolve().then(({ schema }) =>\n            getRecordAction(recordId).then(record => {\n                if (record && record.SchemaId === schema.id) {\n                    return record;\n                } else {\n                    return null;\n                }\n            })\n        );\n    }\n\n    getRecords(query) {\n        const getRecordListAction = getListFactory(\"Record\", this._modelManager);\n\n        return this._contextAction\n            .resolve()\n            .then(({ schema }) => getRecordListAction(Object.assign({}, query, { SchemaId: schema.id })));\n    }\n\n    createRecord(data) {\n        const createRecordAction = createFactory(\"Record\", this._modelManager);\n\n        return this._contextAction\n            .resolve()\n            .then(({ schema }) => createRecordAction({ data: data, SchemaId: schema.id }))\n            .then(record => record.toJSON());\n    }\n\n    updateRecord(recordId, data) {\n        const updateRecordAction = updateFactory(\"Record\", this._modelManager);\n\n        return this._contextAction\n            .resolve()\n            .then(() => updateRecordAction(recordId, { data: data }))\n            .then(() => true);\n    }\n\n    removeRecord(recordId) {\n        const removeRecordAction = removeFactory(\"Record\", this._modelManager);\n\n        return this._contextAction\n            .resolve()\n            .then(() => removeRecordAction(recordId))\n            .then(() => true);\n    }\n\n    async getAttributes() {\n        return false;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/contexts/schemaContext/SchemaContext.js","export default schemaId => modelManager => () => {\n    return modelManager\n        .getModels()\n        .Schema.findOne({\n            where: {\n                id: schemaId\n            },\n            raw: true\n        })\n        .then(schema => {\n            if (!schema) {\n            }\n            return schema;\n        });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/contexts/schemaContext/contextActions/getSchemaContextFactory.js","import updateFactory from \"../actions/updateFactory\";\nimport removeFactory from \"../actions/removeFactory\";\nimport getRecordContextFactory from \"./contextActions/getRecordContextFactory\";\n\nexport default class RecordContext {\n    constructor(recordId, contextAction, modelManager) {\n        this._contextAction = contextAction.createContextAction(\"record\", getRecordContextFactory(recordId));\n        this._modelManager = modelManager;\n    }\n\n    updateRecord(data) {\n        const updateRecordAction = updateFactory(\"Record\", this._modelManager);\n\n        return this._contextAction\n            .resolve()\n            .then(({ record }) => updateRecordAction(record.id, { data: data }))\n            .then(() => true);\n    }\n\n    removeRecord() {\n        const removeRecordAction = removeFactory(\"Record\", this._modelManager);\n\n        return this._contextAction\n            .resolve()\n            .then(({ record }) => removeRecordAction(record.id))\n            .then(() => true);\n    }\n\n    getData() {\n        return this._contextAction.resolve().then(({ record }) => record);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/contexts/recordContext/RecordContext.js","export default recordId => modelManager => ({ schema }) => {\n    return modelManager\n        .getModels()\n        .Record.findOne({\n            where: {\n                SchemaId: schema.id,\n                id: recordId\n            },\n            raw: true\n        })\n        .then(record => {\n            if (!record) {\n            }\n            return record;\n        });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/contexts/recordContext/contextActions/getRecordContextFactory.js","export default userId => modelManager => () => {\n    return modelManager\n        .getModels()\n        .User.findOne({\n            where: {\n                id: userId\n            },\n            raw: true\n        })\n        .then(user => {\n            if (!user) {\n            }\n            return user;\n        });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/contexts/userContext/contextActions/getUserContextFactory.js","import createFactory from \"../actions/createFactory\";\nimport getFactory from \"../actions/getFactory\";\nimport updateFactory from \"../actions/updateFactory\";\nimport getListFactory from \"../actions/getListFactory\";\n\nexport default class UserSchemaContext {\n    constructor(id, contextAction, modelManager) {\n        this._contextAction = contextAction.copyContextAction();\n        this._modelManager = modelManager;\n    }\n\n    createRecord(name) {\n        const createUserRecordAction = createFactory(\"User\", this._modelManager);\n        return this._contextAction\n            .resolve()\n            .then(() => createUserRecordAction({ name: name }))\n            .then(user => user.toJSON());\n    }\n\n    updateRecord(recordId, data) {\n        const updateUserRecordAction = updateFactory(\"User\", this._modelManager);\n\n        return this._contextAction\n            .resolve()\n            .then(() => updateUserRecordAction(recordId, data))\n            .then(() => true);\n    }\n\n    getRecord(userId) {\n        const getUserRecordAction = getFactory(\"User\", this._modelManager);\n\n        return this._contextAction\n            .resolve()\n            .then(() => getUserRecordAction(userId))\n            .then(userRecord => {\n                if (userRecord) {\n                    return userRecord;\n                } else {\n                    return null;\n                }\n            });\n    }\n\n    getRecords(query) {\n        const getUserRecordListAction = getListFactory(\"User\", this._modelManager);\n\n        return this._contextAction\n            .resolve()\n            .then(() => getUserRecordListAction(query))\n            .then(userRecordList => userRecordList);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/contexts/userSchemaContext/UserSchemaContext.js","import throwIfNoSync from \"../throwIfNoSync\";\n\nexport default class ContextAction {\n    constructor(modelManager, contextActions = []) {\n        this._contextActions = contextActions;\n        this._modelManager = modelManager;\n    }\n\n    copyContextAction() {\n        return new ContextAction(this._modelManager, this._contextActions.slice());\n    }\n\n    addAction(key, executeFactory) {\n        this._contextActions.push({ key, execute: executeFactory(this._modelManager) });\n    }\n\n    createContextAction(key, executeFactory) {\n        return new ContextAction(\n            this._modelManager,\n            this._contextActions.concat([{ key, execute: executeFactory(this._modelManager) }])\n        );\n    }\n\n    resolve() {\n        return this._contextActions.reduce((prevContextAction, contextAction) => {\n            return prevContextAction.then(contextObject =>\n                contextAction.execute(contextObject).then(context => {\n                    return Object.assign({}, contextObject, { [contextAction.key]: context });\n                })\n            );\n        }, throwIfNoSync(this._modelManager).then(() => {}));\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/contexts/ContextAction.js","export default function throwIfNoSync(modelManager) {\n    if (modelManager && modelManager.isSync()) {\n        return Promise.resolve();\n    } else {\n        return Promise.reject(new Error(\"No synchronization with database. Run sync() method\"));\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/throwIfNoSync.js","const ROOT_USER_ID = Symbol(\"ROOT_USER_ID\");\nexport default ROOT_USER_ID;\n\n\n\n// WEBPACK FOOTER //\n// ./src/RootUser.js","import fs from \"fs\";\nimport path from \"path\";\nimport Sequelize from \"sequelize\";\nimport Overload from \"function-overloader\";\n\nexport default class ModelManager {\n    constructor() {\n        this._isSync = false;\n        Overload.when(Overload.INSTANCE(Sequelize))\n            .do(sequelize => {\n                this._sequelize = sequelize;\n            })\n            .else(config => {\n                this._sequelize = new Sequelize(config.dbname, config.user, config.password, {\n                    dialect: config.type,\n                    port: config.port,\n                    host: config.host,\n                    logging: config.logging\n                });\n            })\n            .execute(...arguments);\n        this._models = {};\n        fs.readdirSync(path.join(__dirname, \"models\"))\n            .filter(file => {\n                return file.indexOf(\".\") !== 0;\n            })\n            .forEach(file => {\n                const model = this._sequelize.import(path.join(__dirname, \"models\", file));\n                this._models[model.name] = model;\n            });\n        Object.values(this._models).forEach(model => {\n            if (model.associate) {\n                model.associate(this._models);\n            }\n        });\n    }\n\n    getDbInstance() {\n        return this._sequelize;\n    }\n\n    async sync(options) {\n        return this._sequelize.sync(options).then(() => {\n            this._isSync = true;\n        });\n    }\n\n    isSync() {\n        return this._isSync;\n    }\n\n    getModels() {\n        return this._models;\n    }\n\n    async authenticate() {\n        return this._sequelize\n            .authenticate()\n            .then(() => {})\n            .catch(err => {\n                console.error(\"Unable to connect to the database:\", err);\n            });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ModelManager.js","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 21\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 22\n// module chunks = 0","module.exports = require(\"sequelize\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sequelize\"\n// module id = 23\n// module chunks = 0","module.exports = require(\"function-overloader\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"function-overloader\"\n// module id = 24\n// module chunks = 0"],"sourceRoot":""}